# Домашнее задание к занятию "Как работает сеть в K8S"

### Цель задания

Настроить сетевую политику доступа к подам.

### Чеклист готовности к домашнему заданию

1. Кластер k8s с установленным сетевым плагином calico

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. [Документация Calico](https://www.tigera.io/project-calico/)
2. [Network Policy](https://kubernetes.io/docs/concepts/services-networking/network-policies/)
3. [About Network Policy](https://docs.projectcalico.org/about/about-network-policy)

-----

### Задание 1. Создать сетевую политику (или несколько политик) для обеспечения доступа

1. Создать deployment'ы приложений frontend, backend и cache и соответсвующие сервисы.
2. В качестве образа использовать network-multitool.
3. Разместить поды в namespace app.
4. Создать политики чтобы обеспечить доступ frontend -> backend -> cache. Другие виды подключений должны быть запрещены.
5. Продемонстрировать, что трафик разрешен и запрещен.

### Правила приема работы

1. Домашняя работа оформляется в своем Git репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
2. Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов
3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md

- развернул кластер (были проблемы с ubuntu 22.04 и kubernates 1.27, были частые вылеты кластера, помогло использование ubuntu 20.04)  
- установил calico  
- запустил деплои и сервисы  
- запретил весь трафик  
- разрешил только между требуемыми нодами  
- написал скрипт для проверки трафика curl ждет 10 секунд ответа
![изображение](https://user-images.githubusercontent.com/89702147/232710548-b20c6388-a620-4b09-890f-317f07661eb0.png)
результат выполнения скрипта
![изображение](https://user-images.githubusercontent.com/89702147/232710667-09fbb525-b28a-4b28-9281-724d2a56385c.png)
